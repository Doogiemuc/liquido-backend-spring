<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1101px" preserveAspectRatio="none" style="width:957px;height:1101px;" version="1.1" viewBox="0 0 957 1101" width="957px" zoomAndPan="magnify"><defs><filter height="300%" id="f1uwpifjk7z0d7" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f1uwpifjk7z0d7)" height="160.7969" style="stroke:#A80036;stroke-width:1.0;" width="10" x="228" y="201.6953"/><rect fill="#FFFFFF" filter="url(#f1uwpifjk7z0d7)" height="117.6641" style="stroke:#A80036;stroke-width:1.0;" width="10" x="228" y="434.7578"/><rect fill="#FFFFFF" filter="url(#f1uwpifjk7z0d7)" height="187.7969" style="stroke:#A80036;stroke-width:1.0;" width="10" x="228" y="695.2188"/><rect fill="#FFFFFF" filter="url(#f1uwpifjk7z0d7)" height="98.5313" style="stroke:#A80036;stroke-width:1.0;" width="10" x="898" y="552.4219"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="24" x2="24" y1="88.2969" y2="1017.5469"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="233" x2="233" y1="88.2969" y2="1017.5469"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="474" x2="474" y1="88.2969" y2="1017.5469"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="752" x2="752" y1="88.2969" y2="1017.5469"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="903" x2="903" y1="88.2969" y2="1017.5469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="32" x="5" y="84.9951">User</text><ellipse cx="24" cy="15" fill="#FEFECE" filter="url(#f1uwpifjk7z0d7)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M24,23 L24,50 M11,31 L37,31 M24,50 L11,65 M24,50 L37,65 " fill="none" filter="url(#f1uwpifjk7z0d7)" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="32" x="5" y="1029.542">User</text><ellipse cx="24" cy="1042.8438" fill="#FEFECE" filter="url(#f1uwpifjk7z0d7)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M24,1050.8438 L24,1077.8438 M11,1058.8438 L37,1058.8438 M24,1077.8438 L11,1092.8438 M24,1077.8438 L37,1092.8438 " fill="none" filter="url(#f1uwpifjk7z0d7)" style="stroke:#A80036;stroke-width:2.0;"/><rect fill="#FEFECE" filter="url(#f1uwpifjk7z0d7)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="90" x="186" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="76" x="193" y="72.9951">LiquidoApp</text><rect fill="#FEFECE" filter="url(#f1uwpifjk7z0d7)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="90" x="186" y="1016.5469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="76" x="193" y="1036.542">LiquidoApp</text><rect fill="#FEFECE" filter="url(#f1uwpifjk7z0d7)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="128" x="408" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="114" x="415" y="72.9951">Liquido Backend</text><rect fill="#FEFECE" filter="url(#f1uwpifjk7z0d7)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="128" x="408" y="1016.5469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="114" x="415" y="1036.542">Liquido Backend</text><rect fill="#FEFECE" filter="url(#f1uwpifjk7z0d7)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="74" x="713" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="60" x="720" y="72.9951">AuthyAPI</text><rect fill="#FEFECE" filter="url(#f1uwpifjk7z0d7)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="74" x="713" y="1016.5469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="60" x="720" y="1036.542">AuthyAPI</text><rect fill="#FEFECE" filter="url(#f1uwpifjk7z0d7)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="80" x="861" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="66" x="868" y="72.9951">AuthyApp</text><rect fill="#FEFECE" filter="url(#f1uwpifjk7z0d7)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="80" x="861" y="1016.5469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="66" x="868" y="1036.542">AuthyApp</text><rect fill="#FFFFFF" filter="url(#f1uwpifjk7z0d7)" height="160.7969" style="stroke:#A80036;stroke-width:1.0;" width="10" x="228" y="201.6953"/><rect fill="#FFFFFF" filter="url(#f1uwpifjk7z0d7)" height="117.6641" style="stroke:#A80036;stroke-width:1.0;" width="10" x="228" y="434.7578"/><rect fill="#FFFFFF" filter="url(#f1uwpifjk7z0d7)" height="187.7969" style="stroke:#A80036;stroke-width:1.0;" width="10" x="228" y="695.2188"/><rect fill="#FFFFFF" filter="url(#f1uwpifjk7z0d7)" height="98.5313" style="stroke:#A80036;stroke-width:1.0;" width="10" x="898" y="552.4219"/><path d="M595,103.2969 L595,128.2969 L904,128.2969 L904,113.2969 L894,103.2969 L595,103.2969 " fill="#FBFB77" filter="url(#f1uwpifjk7z0d7)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M894,103.2969 L894,113.2969 L904,113.2969 L894,103.2969 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="288" x="601" y="120.3638">https://api.authy.com/protected/json</text><rect fill="#EEEEEE" filter="url(#f1uwpifjk7z0d7)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="950" x="0" y="157.9961"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="950" y1="157.9961" y2="157.9961"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="950" y1="160.9961" y2="160.9961"/><rect fill="#EEEEEE" filter="url(#f1uwpifjk7z0d7)" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="81" x="434.5" y="147.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="62" x="440.5" y="163.4966">Register</text><polygon fill="#A80036" points="216,197.6953,226,201.6953,216,205.6953,220,201.6953" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="24" x2="222" y1="201.6953" y2="201.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="31" y="196.6294">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="49" x="44" y="196.6294">register</text><polygon fill="#A80036" points="462,241.9609,472,245.9609,462,249.9609,466,245.9609" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="238" x2="468" y1="245.9609" y2="245.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="245" y="233.3286">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="134" x="258" y="225.7622">""POST /auth/register</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="195" x="262" y="240.895">{email, profile.mobilephone}""</text><polygon fill="#A80036" points="740,271.0938,750,275.0938,740,279.0938,744,275.0938" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="474" x2="746" y1="275.0938" y2="275.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="481" y="270.0278">3</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="120" x="494" y="270.0278">POST /users/new</text><polygon fill="#A80036" points="485,300.2266,475,304.2266,485,308.2266,481,304.2266" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="479" x2="751" y1="304.2266" y2="304.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="491" y="299.1606">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="82" x="504" y="299.1606">HTTP 200 OK</text><polygon fill="#A80036" points="249,329.3594,239,333.3594,249,337.3594,245,333.3594" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="243" x2="473" y1="333.3594" y2="333.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="255" y="328.2935">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="82" x="268" y="328.2935">HTTP 200 OK</text><polygon fill="#A80036" points="35,358.4922,25,362.4922,35,366.4922,31,362.4922" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="29" x2="232" y1="362.4922" y2="362.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="41" y="357.4263">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="145" x="54" y="357.4263">registered successfully</text><rect fill="#EEEEEE" filter="url(#f1uwpifjk7z0d7)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="950" x="0" y="391.0586"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="950" y1="391.0586" y2="391.0586"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="950" y1="394.0586" y2="394.0586"/><rect fill="#EEEEEE" filter="url(#f1uwpifjk7z0d7)" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="59" x="445.5" y="380.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="40" x="451.5" y="396.5591">Login</text><polygon fill="#A80036" points="216,430.7578,226,434.7578,216,438.7578,220,434.7578" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="24" x2="222" y1="434.7578" y2="434.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="31" y="429.6919">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="108" x="44" y="429.6919">Open LiquidoApp</text><polygon fill="#A80036" points="462,490.1563,472,494.1563,462,498.1563,466,494.1563" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="238" x2="468" y1="494.1563" y2="494.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="245" y="473.9575">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="52" x="258" y="458.8247">Request</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="105" x="258" y="473.9575">One-Time-Token</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="34" x="258" y="489.0903">(OTT)</text><polygon fill="#A80036" points="740,519.2891,750,523.2891,740,527.2891,744,523.2891" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="474" x2="746" y1="523.2891" y2="523.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="481" y="518.2231">9</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="494" y="518.2231">GET /sms/{AUTHY_ID}</text><polygon fill="#A80036" points="886,548.4219,896,552.4219,886,556.4219,890,552.4219" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="752" x2="892" y1="552.4219" y2="552.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="759" y="547.356">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="105" x="781" y="547.356">push notification</text><path d="M623,565.4219 L623,620.4219 L889,620.4219 L889,575.4219 L879,565.4219 L623,565.4219 " fill="#FBFB77" filter="url(#f1uwpifjk7z0d7)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M879,565.4219 L879,575.4219 L889,575.4219 L879,565.4219 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="145" x="629" y="582.4888">AuthyApp pops up and</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="245" x="629" y="597.6216">shows a One Time Token (OTT) to user</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="245" x="629" y="612.7544">2FA: User switches back to LiquidoApp</text><ellipse cx="23.5" cy="650.2031" fill="none" rx="4" ry="4" style="stroke:#0000FF;stroke-width:1.5;"/><polygon fill="#0000FF" points="40.5,646.9531,30.5,650.9531,40.5,654.9531,36.5,650.9531" style="stroke:#0000FF;stroke-width:1.0;"/><line style="stroke:#0000FF;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="38.5" x2="902" y1="650.9531" y2="650.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="41" y="645.8872">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="542" x="63" y="645.8872">One time token (OTT). 2FA: This is not a technical callback! This is human interaction.</text><polygon fill="#A80036" points="216,691.2188,226,695.2188,216,699.2188,220,695.2188" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="24" x2="222" y1="695.2188" y2="695.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="31" y="682.5864">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="163" x="53" y="675.02">user manually enters OTT</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="85" x="53" y="690.1528">in LiquidoApp</text><polygon fill="#A80036" points="462,720.3516,472,724.3516,462,728.3516,466,724.3516" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="238" x2="468" y1="724.3516" y2="724.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="245" y="719.2856">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="87" x="267" y="719.2856">login with OTT</text><polygon fill="#A80036" points="740,749.4844,750,753.4844,740,757.4844,744,753.4844" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="474" x2="746" y1="753.4844" y2="753.4844"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="481" y="748.4185">14</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="232" x="503" y="748.4185">GET verify/{TOKEN}/{AUTHY_ID}</text><polygon fill="#A80036" points="485,778.6172,475,782.6172,485,786.6172,481,782.6172" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="479" x2="751" y1="782.6172" y2="782.6172"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="491" y="777.5513">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="82" x="513" y="777.5513">HTTP 200 OK</text><polygon fill="#A80036" points="249,807.75,239,811.75,249,815.75,245,811.75" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="243" x2="473" y1="811.75" y2="811.75"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="255" y="806.6841">16</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="126" x="277" y="806.6841">JsonWebToken (JWT)</text><line style="stroke:#A80036;stroke-width:1.0;" x1="238" x2="280" y1="840.8828" y2="840.8828"/><line style="stroke:#A80036;stroke-width:1.0;" x1="280" x2="280" y1="840.8828" y2="853.8828"/><line style="stroke:#A80036;stroke-width:1.0;" x1="239" x2="280" y1="853.8828" y2="853.8828"/><polygon fill="#A80036" points="249,849.8828,239,853.8828,249,857.8828,245,853.8828" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="245" y="835.8169">17</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="63" x="267" y="835.8169">cache JWT</text><polygon fill="#A80036" points="35,879.0156,25,883.0156,35,887.0156,31,883.0156" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="29" x2="232" y1="883.0156" y2="883.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="41" y="877.9497">18</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="100" x="63" y="877.9497">login successful</text><rect fill="#EEEEEE" filter="url(#f1uwpifjk7z0d7)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="950" x="0" y="911.582"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="950" y1="911.582" y2="911.582"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="950" y1="914.582" y2="914.582"/><rect fill="#EEEEEE" filter="url(#f1uwpifjk7z0d7)" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="123" x="413.5" y="901.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="104" x="419.5" y="917.0825">Authenticated</text><polygon fill="#A80036" points="462,966.4141,472,970.4141,462,974.4141,466,970.4141" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="233" x2="468" y1="970.4141" y2="970.4141"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="240" y="957.7817">19</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="149" x="262" y="950.2153">authenticated requests</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="114" x="262" y="965.3481">with JWT in header</text><polygon fill="#A80036" points="244,995.5469,234,999.5469,244,1003.5469,240,999.5469" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="238" x2="473" y1="999.5469" y2="999.5469"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="250" y="994.481">20</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="82" x="272" y="994.481">HTTP 200 OK</text><!--MD5=[067acfe0c625cc158281440f43c67358]
@startuml
autonumber

actor User
participant LiquidoApp
participant "Liquido Backend" as BE
participant AuthyAPI
participant AuthyApp

note over AuthyAPI: ""https://api.authy.com/protected/json""

== Register ==

User -> LiquidoApp: register
activate LiquidoApp

LiquidoApp -> BE: ""POST /auth/register\n {email, profile.mobilephone}""

BE -> AuthyAPI: ""POST /users/new""

AuthyAPI - -> BE: HTTP 200 OK

BE - -> LiquidoApp: HTTP 200 OK

LiquidoApp - -> User: registered successfully
deactivate LiquidoApp

== Login ==

User -> LiquidoApp: Open LiquidoApp
activate LiquidoApp

LiquidoApp -> BE: Request\nOne-Time-Token\n(OTT)

BE -> AuthyAPI: ""GET /sms/{AUTHY_ID}""
AuthyAPI -> AuthyApp: push notification
deactivate LiquidoApp
activate AuthyApp


note left of AuthyApp: AuthyApp pops up and\nshows a One Time Token (OTT) to user\n2FA: User switches back to LiquidoApp

AuthyApp -[#blue]->o User: One time token (OTT). 2FA: This is not a technical callback! This is human interaction.
deactivate AuthyApp

User -> LiquidoApp: user manually enters OTT\nin LiquidoApp
activate LiquidoApp

LiquidoApp -> BE: login with OTT
BE -> AuthyAPI: ""GET verify/{TOKEN}/{AUTHY_ID}""
AuthyAPI - -> BE: HTTP 200 OK

BE - -> LiquidoApp: JsonWebToken (JWT)
LiquidoApp -> LiquidoApp: cache JWT
LiquidoApp - -> User: login successful
deactivate LiquidoApp

== Authenticated ==

LiquidoApp -> BE: authenticated requests\nwith JWT in header
BE - -> LiquidoApp: HTTP 200 OK
@enduml

PlantUML version 1.2020.22(Sun Dec 06 09:36:27 UTC 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>