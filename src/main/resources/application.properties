# ===================================================================
# COMMON SPRING BOOT PROPERTIES
#
# rename this file to application.properties and fill out USER and PASSWORD below
#
# http://docs.spring.io/spring-boot/docs/current/reference/html/common-application-properties.html
# ===================================================================

# Endpoint for the HATEOAS resources exposed by spring-data-rest (Which are also further configured in org.doogie.rest.LiquidoRepositoryRestConfigurer.java)
spring.data.rest.base-path=/liquido/v2

# This setting would change the root path for EVERYTHING (servlets, jpa repos, the public dir and custom rest endpoints)
# server.servlet.path=/servletPathPrefix

# Port of running backend server  (default: 8080)
server.port=8080

####################################
# Debugging logs
####################################

# Enable for a lot of fancy and helpful debug messages
#debug=true
#logging.level.web=TRACE
#logging.level.org.springframework=TRACE
#logging.level.org.springframework.web=TRACE




####################################
# Database settings
# For testing, an embedded in memory DB called "H2" is autoconfigured
####################################

# Should the schema be recreated on startup.
# The default when using theembedded H2 database is create-drop  => recreate everything from scratch
# one of    none, validate, update, create, and create-drop(default for embedded DBs)
# !!! DO NOT SET THIS TO create-drop IN PRODUCTION OR YOU WILL LOOSE ALL YOUR DATA !!!
spring.jpa.hibernate.ddl-auto=none
# spring.jpa.hibernate.use-new-id-generator-mappings=true

# Show Hibernate Schema creation   https://docs.spring.io/spring-boot/docs/current/reference/html/howto-database-initialization.html#howto-initialize-a-database-using-hibernate
#spring.jpa.show-sql=true
#spring.jpa.properties.hibernate.type=TRACE

#Show Hibernate JPA SQL commands during runtime including parameter values  (also needs debug=true)
#logging.level.org.hibernate.SQL=DEBUG
#logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE

# Enable the H2 Web console for the embedded H2 DB when testing. JDBC URL is   jdbc:h2:mem:testdb    username: sa   no password
spring.h2.console.enabled=true
spring.h2.console.path=/h2-console

############ This is how you could configure the connection to a JDBC database
#spring.datasource.url=jdbc:mysql://db_host/prod
#spring.datasource.username=dbuser
#spring.datasource.password=dbpass
#spring.datasource.driver-class-name=com.mysql.jdbc.Driver

spring.jpa.open-in-view=false




####################################
# Json Web Token   JWT
####################################
app.jwt.secret=liquidoSecret
# miliseconds
app.jwt.expiration = 3600000
app.jwt.claims.refresh.name=refreshClaimName


#################################################
# Quartz Job scheduler
#################################################

spring.quartz.job-store-type=jdbc
spring.quartz.jdbc.initialize-schema=always

#################################################
# Autogenerate Swagger API docs
#################################################

#springfox.documentation.swagger.v2.path=/liquido/v2/api-docs


#################################################
# Security JWT and Oauth2
#################################################

#security.oauth2.resource.filter-order=3

#security.signing-key=secret-signing-key34
#security.encoding-strength=256
#security.security-realm=Liquido Security Realm

#security.jwt.client-id=liquidoclientid
#security.jwt.client-secret=liquido.slient:secret5
#security.jwt.grant-type=password
#security.jwt.scope-read=read
#security.jwt.scope-write=write
#security.jwt.resource-ids=liquidoresourceid







# http://stackoverflow.com/questions/24994440/no-serializer-found-for-class-org-hibernate-proxy-pojo-javassist-javassist
# spring.jackson.serialization.fail-on-empty-beans=false

## Use Googles JSON for (un)marshalling POJOs <-> JSON
spring.http.converters.preferred-json-mapper=gson

###################
# Logging
# Since 10 years and three logging frameworks I am always re-learning, how to configure this simple logging format. It gives you clickable links in your IDE *G*
#####################

spring.output.ansi.enabled=ALWAYS
logging.level.org.doogie.liquido=TRACE
logging.level.org.springframework.web.filter.CommonsRequestLoggingFilter=TRACE
logging.pattern.console=%highlight(%-5level) %cyan(%-70.70(.\\(%file:%line\\).%method\\(\\))) | %message%n


##################################
# Liquido Application properties
# The values of these properties will be read from DB. But they can be initialized here.
#

# Version vom maven pom.xml
liquido.version=@version@

# Number of likes that an idea needs to reach its quorum
liquido.supporters.for.proposal=10

# Number of day after creating a new poll until voting starts (if there are at least two proposals in that poll by then
liquido.days.until.voting.starts=14

# Duration of voting phase of a poll
liquido.duration.of.voting.phase=14

# SECURITY: Salt for creating checksums of voterTokens. This must be a valid BCrypt salt ie. begin with $2a$10$!
liquido.bcrypt.salt=$2a$10$1IdrGrRAN2Wp3U7QI.JIzu

# A secret only known to the server. This ensures that only this server is able to create valid voterTokens and checksums
liquido.bcrypt.secret=liquidoServerSecret

# How long is (the checksum of) a voterToken valid? Then it needs to be refreshed.
liquido.checksum.expiration.hours = 24

# In DEV and TEST environment this SMS login code is valid for any user.  SET THIS TO EMPTY IN PROD!
liquido.dev.dummySmsLoginCode=998877

